(()=>{var j=Object.defineProperty;var L=(a,e,i)=>e in a?j(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var y=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var h=(a,e,i)=>(L(a,typeof e!="symbol"?e+"":e,i),i);var l=(a,e,i)=>new Promise((s,t)=>{var r=o=>{try{n(i.next(o))}catch(c){t(c)}},u=o=>{try{n(i.throw(o))}catch(c){t(c)}},n=o=>o.done?s(o.value):Promise.resolve(o.value).then(r,u);n((i=i.apply(a,e)).next())});var A=y((V,z)=>{z.exports=""});var q=y((R,H)=>{H.exports=`<div>\r
    Check Console\r
    <button>Run</button>\r
</div>`});var T=y((ie,_)=>{_.exports=`<div>\r
    <button>Run</button>\r
</div>`});var F=y((le,$)=>{$.exports=`<div>Test worked!</div>\r
<button>Clickme</button>`});var f=class extends HTMLElement{constructor(){super();h(this,"template",e=>`<div> Custom Fragment Props: ${JSON.stringify(e)} </div>`);h(this,"props",{test:!0});h(this,"oncreate");h(this,"onresize");h(this,"ondelete");h(this,"onchanged");h(this,"fragment");h(this,"obsAttributes",["props","options","onchanged","onresize","ondelete","oncreate","template"]);h(this,"delete",()=>{this.fragment=void 0,this.remove(),this.ondelete&&this.ondelete(this.props)});h(this,"render",(e=this.props)=>{typeof this.template=="function"?this.templateString=this.template(e):this.templateString=this.template;let i=document.createElement("template");i.innerHTML=this.templateString;let s=i.content;this.fragment&&this.removeChild(this.fragment),this.fragment=s,this.appendChild(s),this.oncreate&&this.oncreate(e)});h(this,"state",{pushToState:{},data:{},triggers:{},setState(e){if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0)for(let i of Object.getOwnPropertyNames(this.triggers))this.pushToState[i]&&(this.data[i]=this.pushToState[i],delete this.pushToState[i],this.triggers[i].forEach(s=>{s.onchanged(this.data[i])}));return this.pushToState},subscribeTrigger(e,i=s=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let s=this.triggers[e].length;return this.triggers[e].push({idx:s,onchanged:i}),this.triggers[e].length-1}else return},unsubscribeTrigger(e,i){let s,t=this.triggers[e];if(t)if(!i)delete this.triggers[e];else return t.find(u=>{if(u.idx===i)return!0})&&t.splice(s,1),!0},subscribeTriggerOnce(e=void 0,i=s=>{}){let s,t=r=>{i(r),this.unsubscribeTrigger(e,s)};s=this.subscribeTrigger(e,t)}})}get observedAttributes(){return this.obsAttributes}get obsAttributes(){return this.obsAttributes}set obsAttributes(e){typeof e=="string"?this.obsAttributes.push(e):Array.isArray(e)&&(this.obsAttributes=e)}static get tag(){return this.name.toLowerCase()+"-"}static addElement(e=this.tag,i=this,s=void 0){d(i,e,s)}attributeChangedCallback(e,i,s){if(e==="onchanged"){let t=s;if(typeof t=="string"&&(t=b(t)),typeof t=="function"){this.onchanged=t,this.state.data.props=this.props,this.state.unsubscribeTrigger("props"),this.state.subscribeTrigger("props",this.onchanged);let r=new CustomEvent("changed",{detail:{props:this.props}});this.state.subscribeTrigger("props",()=>{this.dispatchEvent(r)})}}else if(e==="onresize"){let t=s;if(typeof t=="string"&&(t=b(t)),typeof t=="function"){try{window.removeEventListener("resize",this.onresize)}catch(r){}this.onresize=t,window.addEventListener("resize",this.onresize)}}else if(e==="ondelete"){let t=s;typeof t=="string"&&(t=b(t)),typeof t=="function"&&(this.ondelete=()=>{window.removeEventListener("resize",this.onresize),this.state.unsubscribeTrigger("props"),t()})}else if(e==="oncreate"){let t=s;typeof t=="string"&&(t=b(t)),typeof t=="function"&&(this.oncreate=t)}else if(e==="props"){let t=s;typeof t=="string"&&(t=JSON.parse(t)),Object.assign(this.props,t),this.state.setState({props:this.props})}else if(e==="template"){let t=s;this.template=options.template,typeof t=="function"?this.templateString=this.template(this.props):this.templateString=t,this.render(this.props);let r=new CustomEvent("created",{detail:{props:this.props}});this.dispatchEvent(r)}else{let t=s;if(e.includes("eval_"))e=e.split("_"),e.shift(),e=e.join(),t=b(s);else if(typeof s=="string")try{t=JSON.parse(s)}catch(r){t=s}this[e]=t,this.props[e]=t}}connectedCallback(){let e=this.getAttribute("props");typeof e=="string"&&(e=JSON.parse(e)),Object.assign(this.props,e),this.state.setState({props:this.props}),Array.from(this.attributes).forEach(u=>{let n=u.name;if(!this[n]){let o=u.value;if(n.includes("eval_"))n=n.split("_"),n.shift(),n=n.join(),o=b(u.value);else if(typeof u.value=="string")try{o=JSON.parse(u.value)}catch(c){o=u.value}Object.defineProperties(this,u,{value:o,writable:!0,get(){return this[n]},set(c){this.setAttribute(n,c)}}),this[n]=o,this.props[n]=o,this.obsAttributes.push(n)}});let i=new CustomEvent("resized",{detail:{props:this.props}}),s=new CustomEvent("changed",{detail:{props:this.props}}),t=new CustomEvent("deleted",{detail:{props:this.props}}),r=new CustomEvent("created",{detail:{props:this.props}});if(this.render(this.props),this.dispatchEvent(r),this.state.subscribeTrigger("props",()=>{this.dispatchEvent(s)}),typeof this.onresize=="function"&&window.addEventListener("resize",()=>{this.onresize(),this.dispatchEvent(i)}),typeof this.ondelete=="function"){let u=this.ondelete;this.ondelete=()=>{window.removeEventListener("resize",this.onresize),this.state.unsubscribeTrigger("props"),u(),this.dispatchEvent(t)}}typeof this.onchanged=="function"&&(this.state.data.props=this.props,this.state.subscribeTrigger("props",this.onchanged))}get props(){return this.props}set props(e={}){this.setAttribute("props",e)}get template(){return this.template}set template(e){this.setAttribute("template",e)}get render(){return this.render}get delete(){return this.delete}get state(){return this.state}get onchanged(){return this.onchanged}set onchanged(e){this.setAttribute("onchanged",e)}get onresize(){return this.props}set onresize(e){this.setAttribute("onresize",e)}get ondelete(){return this.props}set ondelete(e){this.setAttribute("ondelete",e)}get oncreate(){return this.oncreate}set oncreate(e){this.setAttribute("oncreated",e)}};function d(a,e,i=null){i?e?window.customElements.define(e,a,{extends:i}):window.customElements.define(a.name.toLowerCase()+"-",a,{extends:i}):e?window.customElements.define(e,a):window.customElements.define(a.name.toLowerCase()+"-",a)}function I(a=""){return a+Math.floor(Math.random()*1e15)}function b(method){let getFunctionBody=a=>a.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=a=>{let e=a.indexOf(")");return a.slice(0,a.indexOf("{",e)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;try{if(newFuncHead.includes("function ")){let a=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(a,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let a=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(a,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else try{newFunc=eval(newFuncHead+newFuncBody+"}")}catch(err){newFunc=eval(method)}}catch(a){}return newFunc}var v={pushToState:{},data:{},triggers:{},setState(a){if(Object.assign(this.pushToState,a),Object.keys(this.triggers).length>0)for(let e of Object.getOwnPropertyNames(this.triggers))this.pushToState[e]&&(this.data[e]=this.pushToState[e],delete this.pushToState[e],this.triggers[e].forEach(i=>{i.onchange(this.data[e])}));return this.pushToState},subscribeTrigger(a,e=i=>{}){if(a){this.triggers[a]||(this.triggers[a]=[]);let i=this.triggers[a].length;return this.triggers[a].push({idx:i,onchange:e}),this.triggers[a].length-1}else return},unsubscribeTrigger(a,e){let i,s=this.triggers[a];if(s)if(!e)delete this.triggers[a];else return s.find(r=>{if(r.idx===e)return!0})&&s.splice(i,1),!0},subscribeTriggerOnce(a=void 0,e=i=>{}){let i,s=t=>{e(t),this.unsubscribeTrigger(a,i)};i=this.subscribeTrigger(a,s)}},w=class{constructor(){h(this,"state",v);h(this,"nodes",new Map);h(this,"nNodes",0)}convertChildrenToNodes(e){e.convertChildrenToNodes(e)}addNode(e={}){return new g(e,void 0,this)}getNode(e){return this.nodes.get(e)}run(e,i,s){if(typeof e=="string"&&(e=this.nodes.get(e)),e)return e.run(e,i,s)}removeTree(e){if(typeof e=="string"&&(e=this.nodes.get(e)),e){let i=function(s){s.children&&(Array.isArray(s.children)?s.children.forEach(t=>{t.stopNode&&t.stopNode(),t.tag&&this.nodes.get(t.tag)&&this.nodes.delete(t.tag),this.nodes.forEach(r=>{r.removeNode&&r.removeNode(t)}),i(t)}):typeof s.children=="object"&&(s.stopNode&&s.stopNode(),s.tag&&this.nodes.get(s.tag)&&this.nodes.delete(s.tag),this.nodes.forEach(t=>{t.removeNode&&t.removeNode(s)}),i(s)))};e.stopNode&&e.stopNode(),e.tag&&(this.nodes.delete(e.tag),this.nodes.forEach(s=>{s.removeNode&&s.removeNode(e)}),i(e))}}removeNode(e){typeof e=="string"&&(e=this.nodes.get(e)),(e==null?void 0:e.tag)&&this.nodes.delete(e.tag),(e==null?void 0:e.tag)&&this.nodes.get(e.tag)&&(this.nodes.delete(e.tag),this.graph&&this.graph.nodes.delete(e.tag),this.nodes.forEach(i=>{i.nodes.get(e.tag)&&i.nodes.delete(e.tag)}))}appendNode(e={},i){i.addChildren(e)}callParent(t,r){return l(this,arguments,function*(e,i,s=e){if(e==null?void 0:e.parent)return yield e.callParent(i,e.children,s)})}callChildren(r,u){return l(this,arguments,function*(e,i,s=e,t){if(e==null?void 0:e.children)return yield e.callChildren(i,s,t)})}subscribe(e,i=s=>{}){return this.state.subscribeTrigger(e,i)}unsubscribe(e,i){this.state.unsubscribeTrigger(e,i)}},g=class{constructor(e={},i,s){h(this,"tag");h(this,"parent");h(this,"children");h(this,"graph");h(this,"state",v);h(this,"nodes",new Map);!e.tag&&s?e.tag=`node${s.nNodes}`:e.tag||(e.tag=`node${Math.floor(Math.random()*1e10)}`),Object.assign(this,e),this.parent=i,this.graph=s,s&&(s.nNodes++,s.nodes.set(e.tag,this)),this.children&&this.convertChildrenToNodes(this)}operator(e,i=this,s){return e}runOp(t){return l(this,arguments,function*(e,i=this,s){let r=yield this.operator(e,i,s);return this.tag&&this.state.setState({[this.tag]:r}),r})}run(e=this,i,s){if(typeof e=="string"){let t;if(this.graph&&(t=this.graph.nodes.get(e)),t||(t=this.nodes.get(e)),e=t,!e)return}return new Promise(t=>l(this,null,function*(){if(e){let r=(n,o,c=0)=>new Promise(m=>l(this,null,function*(){c++;let p=yield n.runOp(o,n,s);if(typeof n.repeat=="number"){for(;c<n.repeat;){if(n.delay){setTimeout(()=>l(this,null,function*(){m(yield r(n,o,c))}),n.delay);break}else if(n.frame&&requestAnimationFrame){requestAnimationFrame(()=>l(this,null,function*(){m(yield r(n,o,c))}));break}else p=yield n.runOp(o,n,s);c++}if(c===n.repeat){m(p);return}}else if(typeof n.recursive=="number"){for(;c<n.recursive;){if(n.delay){setTimeout(()=>l(this,null,function*(){m(yield r(n,p,c))}),n.delay);break}else if(n.frame&&requestAnimationFrame){requestAnimationFrame(()=>l(this,null,function*(){m(yield r(n,p,c))}));break}else p=yield n.runOp(p,n,s);c++}if(c===n.recursive){m(p);return}}else{m(p);return}})),u=()=>l(this,null,function*(){let n=yield r(e,i);if(e.backward&&e.parent&&(yield this.runNode(e.parent,n,e)),e.children&&e.forward)if(Array.isArray(e.children))for(let o=0;o<e.children.length;o++)yield this.runNode(e.children[o],n,e);else yield this.runNode(e.children,n,e);if(e.animate&&!e.isAnimating){e.isAnimating=!0;let o=()=>l(this,null,function*(){e.isAnimating&&(yield e.runOp(i,e,s),requestAnimationFrame(()=>l(this,null,function*(){yield o()})))});requestAnimationFrame(o)}if(typeof e.loop=="number"&&!e.isLooping){e.isLooping=!0;let o=()=>l(this,null,function*(){e.looping&&(yield e.runOp(i,e,s),setTimeout(()=>l(this,null,function*(){yield o()}),e.loop))})}return n});e.delay?setTimeout(()=>l(this,null,function*(){t(yield u())}),e.delay):e.frame&&requestAnimationFrame?requestAnimationFrame(()=>l(this,null,function*(){t(yield u())})):t(yield u())}else t(void 0)}))}setOperator(e=function(s,t=this,r){return s}){this.operator=e}setParent(e){this.parent=e}setChildren(e){this.children=e}removeTree(e){if(typeof e=="string"&&(e=this.nodes.get(e)),e){let i=function(s){s.children&&(Array.isArray(s.children)?s.children.forEach(t=>{t.stopNode&&t.stopNode(),t.tag&&this.nodes.get(t.tag)&&this.nodes.delete(t.tag),this.nodes.forEach(r=>{r.removeNode&&r.removeNode(t)}),i(t)}):typeof s.children=="object"&&(s.stopNode&&s.stopNode(),s.tag&&this.nodes.get(s.tag)&&this.nodes.delete(s.tag),this.nodes.forEach(t=>{t.removeNode&&t.removeNode(s)}),i(s)))};e.stopNode&&e.stopNode(),e.tag&&(this.nodes.delete(e.tag),this.nodes.forEach(s=>{s.removeNode&&s.removeNode(e)}),i(e),this.graph&&this.graph.nodes.removeTree(e))}}addNode(e={}){let i=new g(e,this,this.graph);return this.nodes.set(i),this.graph&&this.graph.nodes.set(i),i}removeNode(e){typeof e=="string"&&(e=this.nodes.get(e)),(e==null?void 0:e.tag)&&this.nodes.delete(e.tag),(e==null?void 0:e.tag)&&this.nodes.get(e.tag)&&(this.nodes.delete(e.tag),this.graph&&this.graph.nodes.delete(e.tag),this.nodes.forEach(i=>{i.nodes.get(e.tag)&&i.nodes.delete(e.tag)}))}appendNode(e,i=this){typeof e=="string"&&(e=this.nodes.get(e)),e&&i.addChildren(e)}getNode(e){return this.nodes.get(e)}runNode(e,i,s){if(typeof e=="string"&&(e=this.nodes.get(e)),e)return e.run(e,i,s)}stopLooping(){node.isLooping=!1}stopAnimating(){node.isAnimating=!1}stopNode(){this.stopAnimating(),this.stopLooping()}addChildren(e){this.children||(this.children=[]),!Array.isArray(this.children)&&this.children?this.children=[this.children]:Array.isArray(e)?this.children.push(...e):this.children.push(e)}convertChildrenToNodes(e=this){var i,s,t;if(((i=e.children)==null?void 0:i.name)==="GraphNode")((s=this.graph)==null?void 0:s.nodes.get(e.tag))||this.graph.nodes.set(e.tag),this.nodes.get(e.tag)||this.nodes.set(e.tag);else if(Array.isArray(e.children))for(let r=0;r<e.children.length;r++)if(e.children[r].name==="GraphNode"){((t=this.graph)==null?void 0:t.nodes.get(e.children[r].tag))||this.graph.nodes.set(e.children[r].tag),this.nodes.get(e.children[r].tag)||this.nodes.set(e.children[r].tag);continue}else typeof e.children[r]=="object"?(e.children[r]=new g(e.children[r],e,this.graph),this.nodes.set(e.children[r].tag),this.convertChildrenToNodes(e.children[r])):typeof e.children[r]=="string"&&(this.graph&&(e.children[r]=this.graph.getNode(e.children[r]),this.nodes.get(e.children[r].tag)||this.nodes.set(e.children[r])),e.children[r]||(e.children[r]=this.nodes.get(e.children[r])));else typeof e.children=="object"?(e.children=new g(e.children,e,this.graph),this.nodes.set(e.children.tag),this.convertChildrenToNodes(e.children)):typeof e.children=="string"&&(this.graph&&(e.children=this.graph.getNode(e.children),this.nodes.get(e.children.tag)||this.nodes.set(e.children)),e.children||(e.children=this.nodes.get(e.children)));return e.children}callParent(s){return l(this,arguments,function*(e,i=this){var t;if(typeof((t=this.parent)==null?void 0:t.operator)=="function")return yield this.parent.runOp(e,this.parent,i)})}callChildren(t){return l(this,arguments,function*(e,i=this,s){var u,n;let r;if(Array.isArray(this.children))if(s)r=yield(u=this.children[s])==null?void 0:u.runOp(e,this.children[s],i);else{r=[];for(let o=0;o<this.children.length;o++)r.push(yield(n=this.children[s])==null?void 0:n.runOp(e,this.children[s],i))}else this.children&&(r=yield this.children.runOp(e,this.children,i));return r})}setProps(e={}){Object.assign(this,e)}subscribe(e=this.tag,i=s=>{}){return this.state.subscribeTrigger(e,i)}unsubscribe(e=this.tag,i){this.state.unsubscribeTrigger(e,i)}};var M=A(),S=class extends f{constructor(){super();h(this,"props",{tag:void 0,input:void 0,operator:(e,i,s)=>(console.log(e),e),forward:!0,backward:!1,children:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,graph:void 0,node:void 0,input_delay:1});h(this,"template",M);setTimeout(()=>{this.setupNode(this.props),this.props.input&&setTimeout(()=>l(this,null,function*(){this.props.node.runNode(this.props.node,this.props.input,this.props.graph)}),this.props.input_delay)},.01)}setupNode(e){var s,t,r;let i=this.parentNode;if(((s=i.props)==null?void 0:s.operator)&&(e.parentNode=i),!e.graph){for(;!i.props.nodes;){if(i.constructor.name==="HTMLBodyElement"||i.constructor.name==="HTMLHeadElement"||i.constructor.name==="HTMLHtmlElement"||i.constructor.name==="HTMLDocument"){console.error("No AcyclicGraph Found");break}i=i.parentNode}((t=i.props)==null?void 0:t.nodes)&&(e.graph=i.props.graph,e.input_delay=i.props.input_delay)}this.id&&!e.tag&&(e.tag=this.id),e.graph&&!e.node&&e.tag&&(e.node=e.graph.nodes.get(e.tag)),e.node||(e.node=new g(e,i.node,e.graph)),e.tag=e.node.tag,this.id||(this.id=e.tag),e.parentNode&&((r=e.parentNode.props.node)==null||r.addChildren(e.node))}};d(S,"graph-node");var P=q(),E=class extends f{constructor(){super();h(this,"props",{graph:new w,nodes:[],input_delay:5});h(this,"template",P);setTimeout(()=>{let e=Array.from(this.children),i=[];(e==null?void 0:e.length)>0&&e.forEach(s=>{s.props&&this.props.nodes.push(s.props.node),s.props&&s.parentNode.tagName===this.tagName&&i.push(s)}),this.children_ready(e,i)},this.props.input_delay)}children_ready(e=[],i=[]){this.querySelector("button").onclick=()=>{i.forEach(s=>{s.props.node.runNode(s.props.node,"Test")})}}};d(E,"acyclic-graph");var B=T(),O=class extends f{constructor(){super(...arguments);h(this,"props",{operation:e=>e});h(this,"template",B);h(this,"oncreate",e=>{})}};d(O,"snode-");var N=class{constructor(){h(this,"addSequence",this.add);h(this,"runSequence",this.run);h(this,"append",this.appendSequence);h(this,"remove",this.removeSequence);h(this,"get",this.getSequence);h(this,"subscribeToOperation",this.subscribe);h(this,"unsubscribeFromOperation",this.unsubscribe);this.sequences=new Map,this.state={pushToState:{},data:{},triggers:{},setState(e){if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0)for(let i of Object.getOwnPropertyNames(this.triggers))this.pushToState[i]&&(this.data[i]=this.pushToState[i],delete this.pushToState[i],this.triggers[i].forEach(s=>{s.onchange(this.data[i])}));return this.pushToState},subscribeTrigger(e,i=s=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let s=this.triggers[e].length;return this.triggers[e].push({idx:s,onchange:i}),this.triggers[e].length-1}else return},unsubscribeTrigger(e,i){let s,t=this.triggers[e];if(t)if(!i)delete this.triggers[e];else return t.find(u=>{if(u.idx===i)return!0})&&t.splice(s,1),!0},subscribeTriggerOnce(e=void 0,i=s=>{}){let s,t=r=>{i(r),this.unsubscribeTrigger(e,s)};s=this.subscribeTrigger(e,t)}}}add(e,i=[]){this.sequences.set(e,i)}run(e,i,s=1){return l(this,null,function*(){let t=this.sequences.get(e);if(t)if(s>1){let r=2,u=t.next;for(;r<s;)u=u.next;yield this.runSequenceLayer(u,i)}else yield this.runSequenceLayer(t,i)})}appendSequence(e,i,s={},t){var u,n;let r=this.getSequence(e,i);r&&(Array.isArray(r)||(r=[r]),t?(((u=r[t])==null?void 0:u.next)||(r.next=[]),(n=r[t])==null||n.next.push(s)):r.push(s))}removeSequence(e,i,s){let t;i?t=this.getSequence(e,i-1):t=this.getSequence(e),t&&(s&&t[s]?t.splice(s,1):i&&t.next?(t.tag&&this.unsubscribeFromOperation(t.tag),delete t.next):t&&this.sequences.delete(e))}getSequence(e,i=1){let s=this.sequences.get(e);if(s){if(i>1){let t=2,r=s.next;for(;t<i&&r.next;)r=r.next,t++;return r}return s}}runSequenceLayer(e,i){return l(this,null,function*(){let s=(t,r,u=1)=>l(this,null,function*(){if(!t.operation)if(t.op)t.operation=t.op;else if(t.o)t.operation=t.o;else if(t.f)t.operation=t.f;else if(t.fn)t.operaiion=t.fn;else if(t.callback)t.operation=t.callback;else return r;let n=yield t.operation(r);if(t.tag&&this.state.setState({[t.tag]:n}),typeof t.repeat=="number"){let o=u;for(;o<t.repeat;){if(t.delay){setTimeout(()=>l(this,null,function*(){t.frame?requestAnimationFrame(()=>l(this,null,function*(){o++,yield s(t,r,o)})):(o++,yield s(t,r,o))}),t.delay);break}else n=yield t.operation(r);o++}o===t.repeat&&t.next&&(yield this.runSequenceLayer(t.next,n))}else if(typeof t.recursive=="number"){let o=u;for(;o<t.recursive;){if(t.delay){setTimeout(()=>l(this,null,function*(){t.frame?requestAnimationFrame(()=>l(this,null,function*(){o++,yield s(t,n,o)})):(o++,yield s(t,n,o))}),t.delay);break}else n=yield t.operation(r);o++}o===t.recursive&&t.next&&(yield this.runSequenceLayer(t.next,n))}else t.next&&(yield this.runSequenceLayer(t.next,n))});if(typeof e=="function")yield e(i);else if(typeof e=="string")this.runSequence(e,i);else if(Array.isArray(e))for(let t=0;t<e.length;t++){let r=e[t];typeof r=="function"?i=yield r(i):r.delay?r.frame&&typeof requestAnimationFrame=="function"?setTimeout(()=>l(this,null,function*(){requestAnimationFrame(()=>l(this,null,function*(){s(r,i)}))}),r.delay):setTimeout(()=>l(this,null,function*(){s(r,i)}),r.delay):r.frame?requestAnimationFrame(()=>l(this,null,function*(){s(r,i)})):s(r,i)}else typeof e=="object"&&s(e,i)})}subscribe(e,i=s=>{}){if(e)return this.state.subscribeTrigger(e,i)}unsubscribe(e,i){e&&this.state.unsubscribeTrigger(e,i)}};var D=T(),x=class extends f{constructor(){super(...arguments);h(this,"props",{sequencer:new N,sequences:[]});h(this,"template",D);h(this,"graphnode");h(this,"oncreate",e=>{let i=this.querySelectorAll("seq-node");(i==null?void 0:i.length)>0&&i.forEach(t=>{e.nodes.push(t.props.node)});let s=this.querySelectorAll("sequencer- > snode");this.querySelector("button").onclick=()=>{s.forEach(t=>{e.graph.run(t.props.node)})}})}};d(x,"sequencer-");var J=F(),C=class extends f{constructor(){super(...arguments);h(this,"props",{});h(this,"template",J);h(this,"oncreate",e=>{let i=this.querySelector("button"),s=this.querySelector("div");i&&(i.onclick=t=>{s.innerHTML="Clicked!"})})}};d(C,"custom-");})();
//# sourceMappingURL=app.js.map
